<div class="content_header">
	<h1>User Stats</h1>
</div>

<div class="content" id="users">

	<div id="registered_users">
		<h2><%=h @users.size %> registered users</h2>

		<table>
			<tr>
				<th class="first_column">User name</th>
				<th class="centered">Last login</th>
				<th class="centered">Login count</th>
				<th class="last_column">Email</th>
			</tr>
			<% for user in @users %>
			<tr>
				<td class="first_column name"><%= h user.login %></td>
				<td class="centered"><%= h user.last_login_at %></td>
				<td class="centered"><%= h user.login_count %></td>
				<td class="last_column"><%= h user.email %></td>
			</tr>
			<% end %>
		</table>

	</div>

	<div id="invites_sent">
		<h2><%=h @invited.size %> invites sent</h2>
		<table>
			<tr>
				<th class="first_column">Recipient's email</th>
				<th class="centered">Sender's login</th>
				<th class="last_column">Invitation date</th>
			</tr>
		<% for invite in @invited %>
			<tr>
				<td class="first_column name"><%=h invite.recipient_email %></td>
				<td class="centered"><%=h invite.sender.login if !invite.sender.nil? %></td>
				<td class="last_column"><%=h time_as_date(invite.sent_at) %></td>
			</tr>
		<% end %>
		</table>
	</div>
	
	<div id="invite_requests">
		<h2><%=h @waiting.size %> people have put their name on the wait list</h2>
		<ol>
		<% for wait in @waiting %>
				<li><span class="name"><%= h wait.recipient_email %></span> on <%=h time_as_date(wait.created_at) %></li>
		<% end %>
		</ol>
	</div>

</div>
