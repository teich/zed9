<div id="content_header">
	<% if !current_user %>
		<div id="join_prompt_index">
			<a href="/">Join ZED9 to track your workouts and see how you measure up</a>
		</div>
	<% end %>

	<h1><%=h @user.login %>'s workouts <% if my_workout? %><span class="action"><%= link_to 'Add', new_user_workout_path(current_user) %></span><% end %></h1>
</div>

<div id="content">

	<div id="workouts_left_column" class="left_column">

		<% if (params[:tag])%>
			<p class="filtered">Filtered by: <%= h params[:tag] %>&nbsp;
			<%= link_to 'x', user_workouts_path(current_user) %> </p>
		<% end %>

		<div id="workouts_list">
			<table class="newsfeed">
				<% for workout in @workouts %>
				<tr>
					<td class="first_column activity_icon"><%= link_to image_tag(workout.activity.root.icon_path, :class => "activity_icon_small"), activity_path(workout.activity) %></td>
					<td class="name"><%= link_to workout.name, workout %></td>
					<td><%=h time_as_date(workout.start_time) %><br></td>
					<td><%=h number_to_short_time(workout.duration) %>h</td>
					<td class="tags"><% for tag in workout.tag_list %>
						<%= link_to tag, user_workouts_path(@user, :tag => tag) %>
						<% end %><br></td>
					<% if my_workout? %><td class="last_column no_wrap"><%= link_to image_submit_tag("../../images/pencil.png", :class => "action_icon", :onmouseover => "this.src='../../images/pencil_on.png'", :onmouseout => "this.src='../../images/pencil.png'"), edit_workout_path(workout) %>&nbsp;<%= link_to image_tag("../../images/trash.png", :class => "action_icon",  :onmouseover => "this.src='../../images/trash_on.png'", :onmouseout => "this.src='../../images/trash.png'"), workout, :method => :delete, :confirm => "Are you sure you want to delete this workout?" %><br></td><% end %>
				</tr>
			<% end %>
			</table>
		</div>
	</div>

	<div id="workouts_right_column" class="right_column">

		<% if @farthest.size > 0 %>		
		<div class="leaderboard">
			<div class="border">
				<h2><img src="../../images/road.png" height="24px" style="vertical-align:top; padding-right: 8px">Farthest</h2>
				<ol>
					<!-- fix function -->
					<% for workout in @farthest %>
					<li><span class="number"><%=h workout.distance_in_miles %></span><span class="unit">miles</span>: <span class="workout_name"><%= link_to workout.name, workout %></span> on <%=h time_as_date(workout.start_time) %></li>
					<% end %>
				</ol>
			</div>
		</div>
		<% end %>	
		
		<% if @fastest.size > 0 %>		
		<div class="leaderboard">
			<div class="border">
				<h2><img src="../../images/flag.png" height="28px" style="vertical-align:top; padding-right: 8px">Fastest</h2>
				<ol>
					<% for workout in @fastest %>
					<li><span class="number"><%=h workout.avg_speed_in_mph %></span><span class="unit">mph</span>: <span class="workout_name"><%= link_to workout.name, workout %></span> on <%=h time_as_date(workout.start_time) %></li>
					<% end %>
				</ol>
			</div>
		</div>
		<% end %>	

		<% if @longest.size > 0 %>		
		<div class="leaderboard">
			<div class="border">
				<h2><img src="../../images/clock.png" height="22px" style="vertical-align:top; padding-top:4px; padding-right: 8px">Longest</h2>
				<ol>
					<!-- define for time -->
					<% for workout in @longest %> 
					<li><span class="number"><%=h number_to_short_time(workout.duration) %></span><span class="unit">h</span>: <span class="workout_name"><%= link_to workout.name, workout %></span> on <%=h time_as_date(workout.start_time) %></li>
					<% end %>
				</ol>
			</div>
		</div>
		<% end %>	

		<% if @heart_pumping.size > 0 %>		
		<div class="leaderboard">
			<div class="border">
				<h2><img src="../../images/heart.png" height="24px" style="vertical-align:top; padding-right: 8px">Heart-pumpers</h2>
				<p>Highest average heart rate in a single workout</p>
				<ol>
					<% for workout in @heart_pumping %>
					<li>
						<span class="number"><%=h workout.hr %></span><span class="unit">bpm</span>: 
						<span class="workout_name"><%= link_to workout.name, workout %></span> on <%=h time_as_date(workout.start_time) %>
					</li>
					<% end %>
				</ol>
			</div>
		</div>
		<% end %>	

		<% if @climbers.size > 0 %>		
		<div class="leaderboard">
			<div class="border">
				<h2><img src="../../images/peaks.png" height="24px" style="vertical-align:middle; padding-right: 8px; padding-bottom:2px">Polka Dot Jersey</h2>
				<p>Biggest climb in a single workout</p>
				<ol>
					<% for workout in @climbers %>
					<li>
						<span class="number"><%=h workout.elevation_in_feet %></span><span class="unit">ft</span>: 
						<span class="workout_name"><%= link_to workout.name, workout %></span> on <%=h time_as_date(workout.start_time) %>
					</li>
					<% end %>
				</ol>
			</div>
		</div>
		<% end %>	

	</div>


<!-- Layout for workout count by activity -->
	<!-- <div id="workouts_stats">
		<ul class="activity_summary">
			<li><div><img class="activity_icon_small" src="/images/activities/running.png">Trail Running: <span class="count">12</span></div></li>
			<li><div><img class="activity_icon_small" src="/images/activities/running.png">Hiking: <span class="count">7</span></div></li>
			<li><div><img class="activity_icon_small" src="/images/activities/running.png">Road Running: <span class="count">3</span></div></li>
			<li><div><img class="activity_icon_small" src="/images/activities/running.png">Road Running: <span class="count">3</span></div></li>
		</ul>
		<br>
	</div> -->


</div>